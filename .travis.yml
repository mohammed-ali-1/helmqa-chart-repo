language: python
env:
  global:
   - REPO_DIR=/home/travis/build/helmqa-chart-repo
   - REPO_URL=https://github.com/mohammed-ali-1/helmqa-chart-repo.git
   - HELMQA_URL=https://helmqa-helmqa.a3c1.starter-us-west-1.openshiftapps.com
   - HELM_URL=https://storage.googleapis.com/kubernetes-helm
   - HELM_TGZ=helm-v2.9.1-linux-amd64.tar.gz
   - OUT_DIR=out
   - secure: Nzu0CZb7pNWuE0q9lXDdmRHyRjWt8qOPvGgA8HEMeheIQjzzs4lFEYxEwrLxpkLWzjOYA1hwBOm9zF+Ng2zdkud1V1TFX4fVqCTjNEYNL9x+mRkzBXphugF/dalgaH6PTuJ+6paiMEtFVq4R/PfR0zQf792M9QZikQZu7Gou2JCa4N+eNY38zExgn2am4Lyr2zQ3rbUjpgrArm6SHvuFBwoPEaiiy1mwbJ6QA0wDJmSwrP+jQXFctO1QjyenNKYzOU2iXQjVmMdRkke1yOcgbdX+njO9W57c5zfABb4oUf+M3dcFa4j3AE44NwPRlWKU+rtScUYeCt9koVVcoVKTg53Q7+8qFy75633QqXASp9NOnPWRvXNG+IIcAXttYjCmWhcWx1ZKHF1vvT2JSpJ98hVAiZPv/Qb2kkbEOOaOt+mp4qwI74KSFXlSllackrvxRGN9sb6N2kilPccVTQZXfJfeyT8NAxpTNjpY6nIydxJjeTjTNSuP1cbFcn6Ykf4NoHrfXy9Ngi/cM9879H4sWSJvvapcUec88kZAxxGJ9U4AABORgEC61nFLljRauT62s02Y5ks32BWV4ZpkxxOcysmnWqK+QTt1yvJXPBYeIUzI7TdkLb9sS9RN9ud9xB7m4+qDPgQg2iE6BUzWpobZb7pBdyVU7P3+HBXNCKK19T0=

before_install:
  - chmod +x .ci/build.sh

install:
  - curl -sSLo /tmp/helm.tgz "${HELM_URL}/${HELM_TGZ}"
  - tar -xzvf /tmp/helm.tgz
  - PATH=$(pwd)/linux-amd64/:$PATH
  - helm init --client-only
  - sudo apt-get install jq
before_script:
  - git fetch origin gh-pages

script: "./.ci/build.sh"

deploy:
  provider: pages
  local-dir: "$OUT_DIR"
  skip-cleanup: true
  github-token: "$GITHUB_TOKEN"
  keep-history: true
  on:
    branch: master
